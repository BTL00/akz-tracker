<IfModule mod_ssl.c>
<VirtualHost *:443>
        ServerName akz-tracker.piotrbomba.com
        
        # Proxy configuration
        ProxyRequests Off
        ProxyPreserveHost On
        ProxyPass / http://localhost:3000/
        ProxyPassReverse / http://localhost:3000/
        
        # WebSocket support
        RewriteEngine On
        RewriteCond %{HTTP:Upgrade} =websocket [NC]
        RewriteCond %{HTTP:Connection} upgrade [NC]
        RewriteRule ^/?(.*) "ws://localhost:3000/$1" [P,L]

        SSLCertificateFile /etc/letsencrypt/live/akz-tracker.piotrbomba.com/fullchain.pem
        SSLCertificateKeyFile /etc/letsencrypt/live/akz-tracker.piotrbomba.com/privkey.pem
        Include /etc/letsencrypt/options-ssl-apache.conf
</VirtualHost>
</IfModule>
